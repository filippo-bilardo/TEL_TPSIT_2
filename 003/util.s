;==========================================================================================
; Project:  Libreria Utils
; Date:     31/03/18
; Author:   Filippo Bilardo
;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;
;  Routine di utilizzo generale
;
; Ver   Date        Comment
;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
; 1.0   31/03/18     Versione iniziale
; <Descrivere per ogni revisione o cambio di versione le modifiche apportate>
; 
;==========================================================================================
;------------------------------------------------------------------------------------------
;=== EXPORT/IMPORT ========================================================================
;------------------------------------------------------------------------------------------
EXPORT DelayMs
;------------------------------------------------------------------------------------------
;=== COSTANTI =============================================================================
;------------------------------------------------------------------------------------------
;------------------------------------------------------------------------------------------
;=== AREA ISTRUZIONI ======================================================================
;------------------------------------------------------------------------------------------
AREA MyCode, CODE, READONLY
THUMB
;-----------------------------------------------------------------------------------------
; Esegue R0 volte il ritardo di 1ms. A 8Mhz ogni istruzione viene esguita in 125ns
; Il ciclo Ã¨ composto da 2x CICLI istruzioni.
; Quindi 2xCICLIx125 = 1ms -> CICLI = 1.000.000/250 = 4000
;
;  INPUT:  R0=Ritardo in millisecondi
;  OUTPUT: none
;  AUTORE: Filippo Bilardo
;  31/03/18  1.0  Versione iniziale
;-----------------------------------------------------------------------------------------
DelayMs
PUSH {R0-R1,LR}
LoopDelayMs1		
    ; Imposto il numero di cicli
LoopDelayMs2                    ; Ciclo di Ritardo
         
        ; Ciclo interno
          
BNE	LoopDelayMs1        ; Ciclo esterno
POP {R0-R1,PC}
;-----------------------------------------------------------------------------------------
ALIGN
END
